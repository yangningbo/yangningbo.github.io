<!doctype html>
<html>
<head>
<title>全球主要交易市场行情</title>

<script type="text/javascript">
var JsCommon={uon:"zuon",uname:"zuname",uid:"zuid",aid:"zaid",rid:"zrid",vip:"zvip",aname:"zaname",note:"znote",lan:"zlan",other:"zother",mainDomain:"https://www.chbtc.com",vipDomain:"https://vip.chbtc.com",p2pDomain:"https://p2p.chbtc.com",transDomain:"https://trans.chbtc.com",staticDomain:"https://s.chbtc.com"};
  try{
    var oldDomain=document.domain;
    var numm1=oldDomain.indexOf('chbtc.com');
    document.domain = oldDomain.substring(numm1,oldDomain.length)
  } catch(msg) {
    document.domain = 'chbtc.com';  
  }
</script>

<script type="text/javascript">
var GLOBAL             = {},
    VERSION            = GLOBAL['VERSION']           = '1505221360738',
    ZNAME              = GLOBAL['ZNAME']              = 'z',
    DOMAIN_BASE        = GLOBAL['DOMAIN_BASE']       = 'chbtc.com',
    DOMAIN_MAIN        = GLOBAL['DOMAIN_MAIN']       = 'https://www.chbtc.com',
    DOMAIN_VIP         = GLOBAL['DOMAIN_VIP']        = 'https://vip.chbtc.com',
    DOMAIN_STATIC      = GLOBAL['DOMAIN_STATIC']     = 'https://s.chbtc.com',
    DOMAIN_P2P         = GLOBAL['DOMAIN_P2P']        = 'https://p2p.chbtc.com',
    DOMAIN_TRANS       = GLOBAL['DOMAIN_TRANS']      = 'https://trans.chbtc.com',
    LANG               = GLOBAL['LANG']              = 'cn',
    UON                = GLOBAL['UON']               = 'zuon',
    UID                = GLOBAL['UID']               = 'zuid',
    AID                = GLOBAL['AID']               = 'zaid',
    RID                = GLOBAL['RID']               = 'zrid',
    VIP                = GLOBAL['VIP']               = 'zvip',
    UNAME              = GLOBAL['UNAME']             = 'zuname',
    ANAME              = GLOBAL['ANAME']             = 'zaname',
    NOTE               = GLOBAL['NOTE']              = 'znote';

</script>
<meta charset="utf-8">
<meta name="renderer" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="no-siteapp">
<meta content="yes" name="apple-mobile-web-app-capable">
<meta content="yes" name="apple-touch-fullscreen">
<meta content="telephone=no" name="format-detection">
<meta content="black" name="apple-mobile-web-app-status-bar-style">
<meta name="author" content="CHBTC.COM">
<meta name="copyright"  content="Copyright &copy;CHBTC.COM 版权所有">
<meta name="revisit-after"  content="1 days">

<link rel="shortcut icon" href="https://s.chbtc.com/statics/img/favicon/favicon_red.ico?V1505221360738">
<link rel=stylesheet type=text/css href="https://s.chbtc.com/statics/css/cnbtc2014.css?V1505221360738" />
<link rel="stylesheet" href="https://s.chbtc.com/statics/css/v2/module.base.css?V1505221360738">
<link rel="stylesheet" href="https://s.chbtc.com/statics/css/v2/module.common.css?V1505221360738">
<script src="https://s.chbtc.com/statics/js/v2/module.base.js?V1505221360738" charset="UTF-8"></script>
<script src="https://s.chbtc.com/statics/js/v2/module.lang.js?V1505221360738" charset="UTF-8"></script>
<script src="https://s.chbtc.com/statics/js/v2/sea.js?V1505221360738" charset="UTF-8"></script>
<script src="https://s.chbtc.com/statics/js/v2/sea.config.js?V1505221360738" charset="UTF-8"></script>
<!--[if lt IE 9]>
  <script src="https://s.chbtc.com/statics/js/v2/html5shiv.min.js?V1505221360738" charset="UTF-8"></script>
  <script src="https://s.chbtc.com/statics/js/v2/respond.min.js?V1505221360738" charset="UTF-8"></script>
<![endif]-->
<script type="text/javascript" src="https://s.chbtc.com/statics/js/common/webcommon.js?V1505221360738" charset="UTF-8"></script>
<script src="https://s.chbtc.com/statics/js/v2/jquery.imgscroll.js" charset="UTF-8"></script>
<script type="text/javascript">
if(JuaBox.isMobile()){
	document.writeln("<style type=\"text/css\">");
	document.writeln(".container, .bk-nav.navbar, .bk-footer, .bk-body, .bg-login, .Jua-showTip {min-width: 980px !important;}  ");
	document.writeln("</style>");
}
</script>


<style>

</style>

</head>
<body>
<div class="bk-body">
  


<style type="text/css">
    /*字体引入*/
    @font-face {font-family: "iconfont";
        src: url('/common/fonts/iconfont.eot?v=1505221360738'); /* IE9*/
        src: url('/common/fonts/iconfont.eot?#iefix&v=1505221360738') format('embedded-opentype'), /* IE6-IE8 */
        url('/common/fonts/iconfont.woff?v=1505221360738') format('woff'), /* chrome, firefox */
        url('/common/fonts/iconfont.ttf?v=1505221360738') format('truetype'), /* chrome, firefox, opera, Safari, Android, iOS 4.2+*/
        url('/common/fonts/iconfont.svg?v=1505221360738#iconfont') format('svg'); /* iOS 4.1- */
    }
    @font-face{font-family:'FontAwesome';
        src:url('/common/fonts/fontawesome-webfont.eot?v=4.3.0');
        src:url('/common/fonts/fontawesome-webfont.eot?#iefix&v=4.3.0') format('embedded-opentype'),
        url('/common/fonts/fontawesome-webfont.woff2?v=4.3.0') format('woff2'),
        url('/common/fonts/fontawesome-webfont.woff?v=4.3.0') format('woff'),
        url('/common/fonts/fontawesome-webfont.ttf?v=4.3.0') format('truetype'),
        url('/common/fonts/fontawesome-webfont.svg?v=4.3.0#fontawesomeregular') format('svg');
        font-weight:normal;font-style:normal;
    }
    @font-face{font-family:'Glyphicons Halflings';
        src:url('/common/fonts/glyphicons-halflings-regular.eot');
        src:url('/common/fonts/glyphicons-halflings-regular.eot?#iefix') format('embedded-opentype'),
        url('/common/fonts/glyphicons-halflings-regular.woff2') format('woff2'),
        url('/common/fonts/glyphicons-halflings-regular.woff') format('woff'),
        url('/common/fonts/glyphicons-halflings-regular.ttf') format('truetype'),
        url('/common/fonts/glyphicons-halflings-regular.svg#glyphicons_halflingsregular') format('svg');
    }
</style>

<!--[if lt IE 9]>
<div class="alert alert-warning text-left" role="alert" style="margin-bottom:0; border-radius:0;position:relative;z-index:999999;">
<p><i class="fa fa-exclamation-triangle fa-fw"></i>你的浏览器不支持CHBTC.COM的一些新特性，请升级或更换你的浏览器至以下新版本。</p>
<p>
<a class='alert-link' href="http://rj.baidu.com/soft/detail/14744.html" target="_blank">(1)、谷歌浏览器(百度下载)</a><br>
<a class='alert-link' href="https://www.google.com/intl/zh-CN/chrome/browser/" target="_blank">(2)、谷歌浏览器(官方下载)</a><br>
<a class='alert-link' href="http://www.firefox.com.cn/download/" target="_blank">(3)、火狐浏览器</a><br>
<a class='alert-link' href="http://chrome.360.cn/" target="_blank">(4)、360极速浏览器</a>
</p>
<p>HTML5时代已经来临，是时候换个浏览器了...</p>
</div>
<![endif]-->

<script type="text/javascript" src="https://s.chbtc.com/statics/js/common/note.js?V1505221360738" charset="UTF-8"></script>
<script type="text/javascript" src="https://s.chbtc.com/statics/js/u/sxb/sxb.js?V1505221360738" charset="UTF-8"></script>

  <div class="coincont container">
  	 <div class="coin-hd">
  	 	<h3>全球主要交易市场行情</h3>
  	 	<div class="list" id="mainList">
  	 		<ul>


  	 		</ul>
  	 	</div>
  	 </div>

  	 <div class="coin-bd">
  	 	<table class="mk-table">
  	 		<thead>
  	 			<tr>
  	 				<th style="padding-left:60px;">市场</th><th>最新成交价</th><th>24H最低价</th><th>24H最高价</th><th>24H成交量</th><th>幅度</th><th>对标CHBTC利润</th>
  	 			</tr>
  	 		</thead>
  	 		<tbody id="mkList">

  	 		


  	 		</tbody>

  	 	</table>

  	 </div>

  </div>

<!--页面中部内容结束-->
</div>

<script type="text/javascript">
$(function(){
	//设置默认值
	var defaultMenuState = " , unfold, unfold, unfold, unfold, unfold";
	//初始化
	if(window.localStorage){
		if(localStorage[ZNAME+'sideBar'] == null) { 
			localStorage[ZNAME+'sideBar'] = defaultMenuState;
		}
		$.cookie(ZNAME+'quickMenu',null);
		$.cookie(ZNAME+'sideBar',null); 
	}else{
		if($.cookie(ZNAME+'sideBar') == null) { 
			$.cookie(ZNAME+'sideBar',defaultMenuState, { expires: 7, path: '/', domain: DOMAIN_BASE}); 
		}
	}
	//获取菜单状态值
	var quickMenuState = window.localStorage ? localStorage[ZNAME+'sideBar'].split(",") : $.cookie(ZNAME+'sideBar').split(",");
	if(window.location.pathname.indexOf("/markets/") == -1 && window.location.pathname != "/" && JuaBox.isMySelf() && !JuaBox.isZoom() ){
		$('.bk-quickMenu').fadeIn().addClass(quickMenuState[0]);
		$(".menu-list dl").each(function(i,c){
			$(this).removeClass("unfold").addClass(quickMenuState[i+1]);
		});
	}
	$(".menu-list").on("click","dt",function(){
		$(".menu-list dl").not($(".menu-list dl").eq($(this).parents("dl").index())).addClass("unfold");
		$(this).parents("dl").toggleClass("unfold");
		for(var i = 0; i < $(".menu-list dl").length; i++){
			quickMenuState[i+1] = $(".menu-list dl").eq(i).attr("class");
		}
		if(window.localStorage){
			localStorage[ZNAME+'sideBar'] = quickMenuState.join(",");
		}else{
			$.cookie(ZNAME+'sideBar', quickMenuState.join(","), { expires: 7, path: '/', domain: DOMAIN_BASE});
		}
	});
	$(".menu-item-unfold, .menu-item-close").on("click",".menu-item-ico",function(){
		$('.bk-quickMenu').toggleClass('open');
		quickMenuState[0] = $('.bk-quickMenu').hasClass('open') ? "open" : "";
		if(window.localStorage){
			localStorage[ZNAME+'sideBar'] = quickMenuState.join(",");
		}else{
			$.cookie(ZNAME+'sideBar', quickMenuState.join(","), { expires: 7, path: '/', domain: DOMAIN_BASE});
		}
	});
	$(".menu-item-top").on("click",".menu-item-ico",function(){
		goScrollTo('html,body',0);
	});
});
</script>



<script type="text/javascript">
seajs.use(["module_market","module_asset","module_common"],function(market,asset){
	market.init();
	asset.init();
});
</script>
<script type="text/javascript">
chbtc.vipDomain = "https://vip.chbtc.com";
chbtc.p2pDomain = "https://p2p.chbtc.com";
chbtc.transDomain = "https://trans.chbtc.com";
chbtc.staticDomain = "https://s.chbtc.com";
//百度统计1
var _hmt = _hmt || [];
setTimeout(function(){
	//仅在首页加载统计，延迟3秒执行
	if(top.location.pathname == '/'){
			var hm = document.createElement("script");
		  hm.src = "//hm.baidu.com/hm.js?8edd8561f890e3dfdc82c315469718b3";
		  var s = document.getElementsByTagName("script")[0]; 
		  s.parentNode.insertBefore(hm, s);
			//百度统计
	    var bp = document.createElement('script');
	    var curProtocol = window.location.protocol.split(':')[0];
	    if (curProtocol === 'https') {
	        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	    }
	    else {
	        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	    }
	    var s = document.getElementsByTagName("script")[0];
	    s.parentNode.insertBefore(bp, s);
		}
},3000)
</script>



<script>
$(function(){
    platform ();
    market();
    setTimeout(function(){

        //do something
        platform();
        setTimeout(arguments.callee,2000);
    },2000)
    setTimeout(function(){

        //do something
        market();
        setTimeout(arguments.callee,2000);
    },2000)
/*    setInterval("platform()",2000);
    setInterval("market()",2000);*/
});
var coin="btc";
var tickerPrice={};
var paltformPrice={};
var tickerRate={};
var paltformRate={};

var sorts=['btc','ltc','eth','etc','bts','eos','bcc','qtum','hsr']

var paltformsorts=['chbtc','huobi','okcoin','bter','yunbi','bitstamp','coinbase','bitfinex','poloniex','kraken','btctrade','bithumb','coinone','acx','allcoin']
function platform () {

    $.ajax({
        type: "POST",
        url: "https://ticker.chbtc.com/getTickersByPlatform",
        data: {platform:"chbtc"},
        dataType: "jsonp",
        error: function () {
           // alert("error");
        },
        success: function (json) {
            if (json.isSuc) {
                var html = "";
                tickerlastPrice();
				$("#mainList").empty();
                $("#mainList").append("<ul></ul>")
                var u = $("#mainList >ul");
                if(sorts==''){//不存在排序时
                    for (var i in json.datas) {
                            var data = json.datas[i];
                            var str=buildLi(data);
                            u.append(str);
                            $("#"+data.coin+"_li").bind('click',function(){
                                liOnclick($(this).attr("id"))
                            });
                    }
				}else {//存在排序的时候
                    for(var sort in sorts){
                        for (var i in json.datas) {
                                var data = json.datas[i];
                                if (data.coin == sorts[sort]) {
                                    var str = buildLi(data);
                                    u.append(str);
                                    $("#" + data.coin + "_li").bind('click', function () {
                                        liOnclick($(this).attr("id"))
                                    });
                                }
                        }
                    }
				}
               // $("#recordList").html(html);
                return false;
            }else{
               // alert("出错了，请稍后重试");
            }
        }
    });
}
function market() {
    $.ajax({
        type: "POST",
        url: "https://ticker.chbtc.com/getTickers",
        data: {coin:coin},
        dataType: "jsonp",
        error: function () {
            //alert("error");
        },
        success: function (json) {
            if (json.isSuc) {
                var html = "";
                paltformlastPrice();
                $("#mkList").empty();
                /*$("#mkList").append("<tr></tr>")*/
                var u = $("#mkList");

                var data0;
                for(var sort in paltformsorts){
                    for (var i in json.datas) {
                        var data = json.datas[i];
                        if(data != null) {
                            if (data.name.toLowerCase() == "chbtc") {
                                data0 = data;
                                break;
                            }
                        }
                    }
                }

                for(var sort in paltformsorts){
                    for (var i in json.datas) {
                        var data = json.datas[i];
                        if(data != null) {
                            if (data.name.toLowerCase() == paltformsorts[sort]) {
                                var str = buildMarket(data0, data);
                                u.append(str);
                            }
                        }
                    }
                }
                /*for (var i in json.datas) {
                    var data = json.datas[i];
                        var str=buildMarket(data);
                        u.append(str);
                }*/
                // $("#recordList").html(html);
                return false;
            }else{
              //  alert("出错了，请稍后重试");
            }
        }
    });
}
function buildLi(data) {
    var str="";
    var riseRate="";
    var rate="";
    if(data.coin==coin){
        str=str+"<li class='on' id='"+data.coin+"_li'>";
    }else {
        str=str+"<li id='"+data.coin+"_li'>";
    }
    str=str+"<h4><b>"+data.coin.toUpperCase()+"</b></h4>"
    var key=data.coin;
    var lastprice=tickerPrice[key];
    if(lastprice!=""&&lastprice!=null){
        var price=lastprice;
        if(price<data.ticker.last){
            rate="up";
            tickerRate[key]=rate;
        }else  if(price==data.ticker.last){
            rate=tickerRate[key];
		} else {
            rate="down";
            tickerRate[key]=rate;
        }
    }
	if(data.ticker.riseRate.indexOf("-")){
        riseRate="up";
        rate=rate==""?"up":rate; tickerRate[key]=rate;
	}else {riseRate="down"; rate=rate==""?"down":rate;tickerRate[key]=rate;}
	/*var lastprice=$("#"+data.coin+"_price").text();
    lastprice=lastprice.substring(1,lastprice.length);*/

    str=str+"<div class='c-price "+rate+"'><span id='"+data.coin+"_price'>￥"+new Number(data.ticker.last)+"</span><i class='fa fa-arrow-"+rate+" fa-fw'></i><em>"+data.ticker.riseRate+"%</em></div></li>"
    return str;
}
function buildMarket(data0, data) {
    var str="";
    var rate="";
    var riseRate="";
    if(data==null){return ""}
    var key=data.name;
        // var price=$("#"+data.name+"_nowprice").text().split(" ")[1];
    var price = paltformPrice[key];
    if (price < data.ticker.last) {
        rate = "up";
        paltformRate[key] = rate;
    } else if (price == data.ticker.last) {
        rate = paltformRate[key] = rate;
    } else {
        rate = "down";
        paltformRate[key] = rate;
    }
    if(data.ticker.riseRate.indexOf("-")){
        riseRate="up";
        rate=rate==""?"up":rate;paltformRate[key]=rate;
    }else {riseRate="down";rate=rate==""?"down":rate;paltformRate[key]=rate;}
    str=str+"<tr> <td><a class='mklogo "+data.name.toLowerCase()+"'></a><b class='marketname'>"+data.name.toUpperCase()+"</b></td>" +
		"<td><span id='"+data.name+"_nowprice' class='nowprice "+rate+"'>¥ "+new Number(data.ticker.last)+"<i class='fa fa-arrow-"+rate+" fa-fw'></i></span><em>$  "+new Number(data.ticker.dollar)+"</em></td>"+
			"<td><span class='day-low-price'>¥ "+new Number(data.ticker.low)+"</span><em>$  "+new Number(data.ticker.lowdollar)+"</em></td>"+
			"<td><span class='day-high-price'>¥ "+new Number(data.ticker.high)+"</span><em>$  "+new Number(data.ticker.highdollar)+"</em></td>"+
			"<td><b class='dayvolume'>"+dayVolume(data.ticker.vol)+"</b></td>"+
			"<td><b class='range "+riseRate+"'>"+data.ticker.riseRate+"%</b></td>"+
			"<td><b class='profit'>"+(new Number(data.ticker.last)*100/new Number(data0.ticker.last)-100).toFixed(2)+"%</b></td></tr>"
	return str;
}
function liOnclick(id) {
	coin=id.replace("_li","");
    $(".on").attr("class","");
    $("#"+coin+"_li").attr("class","on");
    market();
}
function paltformlastPrice() {
        for (var i in paltformsorts) {
            var price= $("#"+paltformsorts[i]+"_nowprice").text().split(" ")[1];
            var key=paltformsorts[i];
            paltformPrice[key]=price;
        }

}
function tickerlastPrice() {
        for (var i in sorts) {
            var price= $("#"+sorts[i]+"_price").text().substring(1,$("#"+sorts[i]+"_price").text().length);
            var key=sorts[i];
            tickerPrice[key]=price;
        }
}
function dayVolume(dayVolume) {
   // var M = require("module_method");
    var dayVolumeStr;
    if(LANG == 'cn'){
        dayVolumeStr = fixNumber(parseFloat(dayVolume)/10000, 2) + "万";
    }else{
        dayVolumeStr = divNumber(parseFloat(dayVolume),2);
    }
    return dayVolumeStr;
}
fixNumber = function(value,unit){
    //此处不能使用toString方法转换字符串，超出7位小数将返回科学计数法的字符串
    var value =  isNaN(value) ? "0" : parseFloat(value).toFixed(8);
    var unit = unit || 0 ;
    var isInt = value.indexOf(".") == -1 ? true : false ;
    var intNum = value.split(".")[0];
    var floatNum = !isInt ? value.split(".")[1] : "0";
    var floatArry = floatNum.split("");
    var newFloatNum = ".";
    for(var i = 0; i < unit ; i++){
        if(!floatArry[i]){
            newFloatNum += "0" ;
        }else{
            newFloatNum += floatArry[i] ;
        }
    }
    return parseFloat(intNum +  newFloatNum).toFixed(unit);
};
divNumber = function(s, n) {
    n = n > 0 && n <= 20 ? n : 2;
    s = parseFloat((s + "").replace(/[^\d\.-]/g, "")).toFixed(n) + "";
    var l = s.split(".")[0].split("").reverse();
    r = s.split(".")[1];
    t = "";
    for(i = 0; i < l.length; i ++ ) {
        t += l[i] + ((i + 1) % 3 == 0 && (i + 1) != l.length ? "," : "");
    }
    return t.split("").reverse().join("") + "." + r;
}
</script>

</body>
</html>
